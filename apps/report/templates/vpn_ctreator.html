{% extends layout_path %}

{% load static %}
{% load i18n %}

{% block title %}سازندگان ابزار گریز{% endblock %}

{% block vendor_css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'vendor/libs/apex-charts/apex-charts.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/swiper/swiper.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/datatables-bs5/datatables.bootstrap5.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/datatables-checkboxes-jquery/datatables.checkboxes.css' %}" />

  <link rel="stylesheet" href="{% static 'vendor/libs/select2/select2.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/tagify/tagify.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/bootstrap-select/bootstrap-select.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/typeahead-js/typeahead.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/apex-charts/apex-charts.css' %}" />

{% endblock vendor_css %}

{% block vendor_js %}
  {{ block.super }}
  <script src="{% static 'vendor/libs/apex-charts/apexcharts.js' %}"></script>
  <script src="{% static 'vendor/libs/swiper/swiper.js' %}"></script>
  <script src="{% static 'vendor/libs/datatables-bs5/datatables-bootstrap5.js' %}"></script>
  <script src="{% static 'vendor/libs/apex-charts/apexcharts.js' %}"></script>

  <script src="{% static 'amcharts5/index.js' %} "></script>
  <script src="{% static 'amcharts5/map.js' %} "></script>
  <script src="{% static 'amcharts5/xy.js' %} "></script>
  <script src="{% static 'amcharts5/themes/Animated.js' %} "></script>
  <script src="{% static 'amcharts5/geodata/worldLow.js' %} "></script>
  <script src="{% static 'amcharts5/plugins/exporting.js' %} "></script>
  <script src="{% static 'js/loading.js' %}"></script>



  <script src="{% static 'vendor/libs/select2/select2.js' %}"></script>
  <script src="{% static 'libs/select2/i18n/fa.js' %}"></script>
  <script src="{% static 'vendor/libs/tagify/tagify.js' %}"></script>
  <script src="{% static 'vendor/libs/bootstrap-select/bootstrap-select.js' %}"></script>
  <script src="{% static 'libs/bootstrap-select/i18n/defaults-fa_IR.js' %}"></script>
  <script src="{% static 'vendor/libs/typeahead-js/typeahead.js' %}"></script>
  <script src="{% static 'vendor/libs/bloodhound/bloodhound.js' %}"></script>
  <script src="{% static 'js/forms-selects.js' %}"></script>
  <script src="{% static 'js/forms-tagify.js' %}"></script>
  <script src="{% static 'js/forms-typeahead.js' %}"></script>
{% endblock vendor_js %}

{% block page_css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'vendor/libs/flatpickr/flatpickr.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/bootstrap-datepicker/bootstrap-datepicker.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/bootstrap-daterangepicker/bootstrap-daterangepicker.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/jquery-timepicker/jquery-timepicker.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/pickr/pickr-themes.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/spinkit/spinkit.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/css/pages/cards-advance.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/swiper/swiper.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/css/pages/ui-carousel.css' %}" />
  <link rel="stylesheet" href="{% static 'vendor/libs/spinkit/spinkit.css' %}" />
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    }

    #chartdiv2 {
      direction: ltr;
      width: 100%;
      height: 400px;
    }

    #chartdiv {
      direction: ltr;
      width: 100%;
      height: 800px;
    }

    #chartdiv2 {
      direction: ltr;
      width: 100%;
      height: 800px;
    }

    .mzloading {
      width: 100%;
      position: fixed;
      top: 0;
      z-index: 5500;
      background: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 75%;
    }

    .carousel-control-next-icon {
      background: #000 url("data:image/svg+xml,%3Csvg width='19' height='18' viewBox='0 0 19 18' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7.25 4.5L11.75 9L7.25 13.5' stroke='%23fff' stroke-width='1.75' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M7.25 4.5L11.75 9L7.25 13.5' stroke='white' stroke-opacity='0.2' stroke-width='1.75' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E") center center no-repeat;
    }

    .carousel-control-prev-icon {
      background: #000 url("data:image/svg+xml,%3Csvg width='18' height='18' viewBox='0 0 18 18' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11.25 4.5L6.75 9L11.25 13.5' stroke='%23fff' stroke-width='1.75' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M11.25 4.5L6.75 9L11.25 13.5' stroke='white' stroke-opacity='0.2' stroke-width='1.75' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E%0A") center center no-repeat;
    }

    .carousel-caption h4 {
      color: #222 !important;
    }

    .carousel-caption p {
      color: #222 !important;
    }

    .carousel-indicators [data-bs-target] {
      background: #000 !important;
    }
  </style>
{% endblock page_css %}

{% block page_js %}
  {{ block.super }}
  <script src="{% static 'js/report-dashboard.js' %}"></script>
  <script src="{% static 'js/forms-selects.js' %}"></script>
  <script src="{% static 'js/forms-tagify.js' %}"></script>
  <script src="{% static 'js/forms-typeahead.js' %}"></script>
  <script src="{% static 'vendor/libs/swiper/swiper.js' %}"></script>
  <script src="{% static 'js/ui-carousel.js' %}"></script>
  <script src="{% static 'js/donut-chart.js' %}"></script>

  <script src="{% static 'vendor/libs/moment/moment.js' %}"></script>
  <script src="{% static 'libs/jdate/jdate.min.js' %}"></script>
  <script src="{% static 'vendor/libs/flatpickr/flatpickr.js' %}"></script>
  <script src="{% static 'libs/flatpickr/flatpickr-jdate.js' %}"></script>
  <script src="{% static 'libs/flatpickr-jalali/dist/l10n/fa.js' %}"></script>
  <script src="{% static 'vendor/libs/bootstrap-datepicker/bootstrap-datepicker.js' %}"></script>
  <script src="{% static 'vendor/libs/bootstrap-daterangepicker/bootstrap-daterangepicker.js' %}"></script>
  <script src="{% static 'vendor/libs/jquery-timepicker/jquery-timepicker.js' %}"></script>
  <script src="{% static 'vendor/libs/pickr/pickr.js' %}"></script>

  <script src="{% static 'vendor/libs/datatables-bs5/datatables-bootstrap5.js' %}"></script>
  <script src="{% static 'vendor/libs/moment/moment.js' %}"></script>
  <script src="{% static 'libs/jdate/jdate.min.js' %}"></script>
  <script src="{% static 'vendor/libs/flatpickr/flatpickr.js' %}"></script>
  <script src="{% static 'libs/flatpickr/flatpickr-jdate.js' %}"></script>
  <script src="{% static 'libs/flatpickr-jalali/dist/l10n/fa.js' %}"></script>

  <script>
    /**
     * ---------------------------------------
     * This demo was created using amCharts 5.
     *
     * For more information visit:
     * https://www.amcharts.com/
     *
     * Documentation is available at:
     * https://www.amcharts.com/docs/v5/
     * ---------------------------------------
     */

    var data = [
      {% for item in country_data %}
        {
          id: '{{ item.country_id }}',
          name: '{{ item.persian_name }}',
          name2: '{{ item.name }}',
          value: {{ item.value }}
        },
      {% endfor %}
    ];


    var root = am5.Root.new('chartdiv');
    root.setThemes([am5themes_Animated.new(root)]);

    var chart = root.container.children.push(am5map.MapChart.new(root, {}));

    var polygonSeries = chart.series.push(
      am5map.MapPolygonSeries.new(root, {
        geoJSON: am5geodata_worldLow,
        exclude: ['AQ']
      })
    );

    var bubbleSeries = chart.series.push(
      am5map.MapPointSeries.new(root, {
        valueField: 'value',
        calculateAggregates: true,
        polygonIdField: 'id'
      })
    );

    var circleTemplate = am5.Template.new({});

    bubbleSeries.bullets.push(function(root, series, dataItem) {
      var container = am5.Container.new(root, {});

      var circle = container.children.push(
        am5.Circle.new(root, {
          radius: 20,
          fillOpacity: 0.7,
          fill: am5.color(0xff0000),
          cursorOverStyle: 'pointer',
          tooltipText: `{name2}: [bold]{value}[/]`
        }, circleTemplate)
      );

      var countryLabel = container.children.push(
        am5.Label.new(root, {
          text: '{name}',
          paddingLeft: 5,
          populateText: true,
          fontWeight: 'bold',
          fontSize: 13,
          centerY: am5.p50
        })
      );

      circle.on('radius', function(radius) {
        countryLabel.set('x', radius);
      });

      return am5.Bullet.new(root, {
        sprite: container,
        dynamic: true
      });
    });

    var exporting = am5plugins_exporting.Exporting.new(root, {
      menu: am5plugins_exporting.ExportingMenu.new(root, {})
    });

    bubbleSeries.bullets.push(function(root, series, dataItem) {
      return am5.Bullet.new(root, {
        sprite: am5.Label.new(root, {
          text: '{value.formatNumber(\'#.\')}',
          fill: am5.color(0xffffff),
          populateText: true,
          centerX: am5.p50,
          centerY: am5.p50,
          textAlign: 'center'
        }),
        dynamic: true
      });
    });


    // minValue and maxValue must be set for the animations to work
    bubbleSeries.set('heatRules', [
      {
        target: circleTemplate,
        dataField: 'value',
        min: 10,
        max: 50,
        minValue: 0,
        maxValue: 100,
        key: 'radius'
      }
    ]);

    bubbleSeries.data.setAll(data);


    function updateData() {
      for (var i = 0; i < bubbleSeries.dataItems.length; i++) {
        bubbleSeries.data.setIndex(i, { value: Math.round(Math.random() * 100), id: data[i].id, name: data[i].name });
      }
    }

  </script>

  <script>
    am5.ready(function() {
      // Create root element
      var root = am5.Root.new('chartdiv2');

      let y1401 = [23, 28, 21, 25, 27, 31, 164, 132, 95, 131, 108, 105,
        88, 93, 89, 73, 64, 57, 60, 68, 72, 69, 61, 73, 75,
        72, 86];

      // Set themes
      root.setThemes([am5themes_Animated.new(root)]);

      // Create chart
      var chart = root.container.children.push(am5xy.XYChart.new(root, {
        panX: true,
        panY: true,
        wheelX: 'panX',
        wheelY: 'zoomX',
        pinchZoomX: true,
        paddingLeft: 0
      }));

      // Add cursor
      var cursor = chart.set('cursor', am5xy.XYCursor.new(root, {
        behavior: 'none'
      }));
      cursor.lineY.set('visible', false);

      // Create axes
      var xAxis = chart.xAxes.push(am5xy.CategoryAxis.new(root, {
        categoryField: 'month',
        renderer: am5xy.AxisRendererX.new(root, {
          minGridDistance: 80,
          minorGridEnabled: true,
          pan: 'zoom'
        }),
        tooltip: am5.Tooltip.new(root, {})
      }));

      var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(root, {
        maxDeviation: 1,
        renderer: am5xy.AxisRendererY.new(root, {
          pan: 'zoom'
        })
      }));

      // Add series
      var series = chart.series.push(am5xy.SmoothedXLineSeries.new(root, {
        name: 'Series',
        xAxis: xAxis,
        yAxis: yAxis,
        valueYField: 'value',
        categoryXField: 'month',
        tooltip: am5.Tooltip.new(root, {
          labelText: '{valueY}'
        })
      }));

      series.fills.template.setAll({
        visible: true,
        fillOpacity: 0.2
      });

      series.bullets.push(function() {
        return am5.Bullet.new(root, {
          locationY: 0,
          sprite: am5.Circle.new(root, {
            radius: 4,
            stroke: root.interfaceColors.get('background'),
            strokeWidth: 2,
            fill: series.get('fill')
          })
        });
      });

      // Add scrollbar
      chart.set('scrollbarX', am5.Scrollbar.new(root, {
        orientation: 'horizontal'
      }));

      let months = ['فروردین 1401', 'اردیبهشت 1401', 'خرداد 1401', 'تیر 1401', 'مرداد 1401', 'شهریور 1401', 'مهر 1401'
        , 'آبان 1401', 'آذر 1401', 'دی 1401', 'بهمن 1401', 'اسفند 1401', 'فروردین 1402', 'اردیبهشت 1402', 'خرداد 1402', 'تیر 1402', 'مرداد 1402', 'شهریور 1402', 'مهر 1402',
        'آبان 1402', 'آذر 1402', 'دی 1402', 'بهمن 1402', 'اسفند 1402', 'فروردین 1403',
        'اردیبهشت 1403', 'خرداد 1403'];


      function updateChartData(yearData) {
        var data = months.map((month, index) => ({
          month: month,
          value: yearData[index]
        }));
        series.data.setAll(data);
        xAxis.data.setAll(data);
      }

      // Initial data load
      updateChartData(y1401);


      // Make stuff animate on load
      series.appear(1000);
      chart.appear(1000, 100);
    }); // end am5.ready()

  </script>
  <script src="{% static 'js/forms-pickers-jalali.js' %}"></script>
{% endblock page_js %}

{% block content %}
  <div class="container-fluid h-100 mzloading">
    <div class="sk-chase sk-primary">
      <div class="sk-chase-dot"></div>
      <div class="sk-chase-dot"></div>
      <div class="sk-chase-dot"></div>
      <div class="sk-chase-dot"></div>
      <div class="sk-chase-dot"></div>
      <div class="sk-chase-dot"></div>
    </div>
  </div>
  {#  <div class="row">#}
  {#    <div class="col-lg-12  mb-4">#}
  {#      <div class="card h-100 p-4">#}
  {#        <div class="row">#}
  {#          <div class="col-md-2">#}
  {#            <label class="form-label" for="flatpickr-range">بازه تاریخ:</label>#}
  {#            <input class="form-control" id="flatpickr-range" placeholder="همه تاریخ ها" type="text" disabled/>#}
  {#          </div>#}
  {#          <div class="col-md-3">#}
  {#            <label class="form-label" for="select2Success">اپراتور</label>#}
  {#            <div class="select2-success">#}
  {#              <select class="select2 form-select" id="select2Success" multiple disabled>#}
  {#                <option value="1">ایرانسل</option>#}
  {#                <option value="2">همراه اول</option>#}
  {#                <option value="3">رایتل</option>#}
  {#                <option value="4">مخابرات</option>#}
  {#              </select>#}
  {#            </div>#}
  {#          </div>#}
  {#          <div class="col-md-2">#}
  {#            <label class="form-label" for="select2Basic">نام ابزار گریز:</label>#}
  {#            <select class="select2 form-select form-select-lg" data-allow-clear="true" id="select2Basic" disabled>#}
  {#              <option label="singapore" value="1">نمایش همگانی</option>#}
  {#              {% for item in vpn %}#}
  {#                <option label="{{ item.name }}" value="{{ item.id }}">{{ item.name }}</option>#}
  {#              {% endfor %}#}
  {#            </select>#}
  {#          </div>#}
  {#          <div class="col-md-2">#}
  {#            <label class="form-label" for="select2Basic2">کشور ابزار گریز:</label>#}
  {#            <select class="select2 form-select form-select-lg" data-allow-clear="true" id="select2Basic2" disabled>#}
  {#              <option label="singapore" value="1">نمایش همگانی</option>#}
  {#              <option label="singapore" value="1">Singapore</option>#}
  {#              <option label="United States" value="1">United States</option>#}
  {#              <option label="Hong Kong" value="1">Hong Kong</option>#}
  {#              <option label="Ukrain" value="1">Ukrain</option>#}
  {#              <option label="Canada" value="1">Canada</option>#}
  {#              <option label="Emirate" value="1">Emirate</option>#}
  {#              <option label="Estonia" value="1">Estonia</option>#}
  {#              <option label="India" value="1">India</option>#}
  {#              <option label="Montengro" value="1">Montengro</option>#}
  {#              <option label="United Kingdom" value="1">United Kingdom</option>#}
  {#              <option label="Vitenam" value="1">Vitenam</option>#}
  {#            </select>#}
  {#          </div>#}
  {##}
  {#          <div class="col-md-2">#}
  {#            <label class="form-label" for="select2Basic3">کشور سرور:</label>#}
  {#            <select class="select2 form-select form-select-lg" data-allow-clear="true" id="select2Basic3" disabled>#}
  {#              <option label="singapore" value="1">نمایش همگانی</option>#}
  {#              <option label="singapore" value="1">Singapore</option>#}
  {#              <option label="United States" value="1">United States</option>#}
  {#              <option label="Hong Kong" value="1">Hong Kong</option>#}
  {#              <option label="Ukrain" value="1">Ukrain</option>#}
  {#              <option label="Canada" value="1">Canada</option>#}
  {#              <option label="Emirate" value="1">Emirate</option>#}
  {#              <option label="Estonia" value="1">Estonia</option>#}
  {#              <option label="India" value="1">India</option>#}
  {#              <option label="Montengro" value="1">Montengro</option>#}
  {#              <option label="United Kingdom" value="1">United Kingdom</option>#}
  {#              <option label="Vitenam" value="1">Vitenam</option>#}
  {#            </select>#}
  {#          </div>#}
  {##}
  {#          <div class="col-md-1">#}
  {#            <label class="form-label" for="select2Basic3">.</label>#}
  {#            <br>#}
  {#            <button class="btn btn-primary" type="button">اعمال فیلتر</button>#}
  {#          </div>#}
  {##}
  {#        </div>#}
  {#      </div>#}
  {#    </div>#}
  {#  </div>#}

  <div class="nav-align-top mb-4">
    <ul class="nav nav-pills mb-3 nav-fill" role="tablist">
      <li class="nav-item">
        <button aria-controls="navs-pills-justified-home" aria-selected="true" class="nav-link active"
                data-bs-target="#navs-pills-justified-home" data-bs-toggle="tab" role="tab" type="button">
          <i class="tf-icons ti ti-table-alias ti-xs me-1"></i>
          نقشه
        </button>
      </li>
      <li class="nav-item">
        <button aria-controls="navs-pills-justified-profile" aria-selected="false" class="nav-link"
                data-bs-target="#navs-pills-justified-profile" data-bs-toggle="tab" role="tab" type="button">
          <i class="tf-icons ti ti-checklist ti-xs me-1"></i>
          نمودار استفاده از ابزار گریز
        </button>
      </li>
    </ul>
    <div class="tab-content">
      <div class="tab-pane fade show active" id="navs-pills-justified-home" role="tabpanel">
        <div class="row">
          <div class="col-12">
            <div id="chartdiv"></div>
          </div>
        </div>
      </div>
      <div class="tab-pane fade" id="navs-pills-justified-profile" role="tabpanel">
        <div id="chartdiv2"></div>
      </div>
    </div>
  </div>








{% endblock content %}

